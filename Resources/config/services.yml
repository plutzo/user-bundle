services:

    marlinc.user.util.user_manipulator:
        class: Marlinc\UserBundle\Util\UserManipulator
        arguments: ['@marlinc.user.user_manager', '@event_dispatcher', '@request_stack']

    marlinc.user.user_manager:
        class: Marlinc\UserBundle\Entity\UserManager
        arguments: ['@fos_user.util.password_updater', '@fos_user.util.canonical_fields_updater', '@fos_user.object_manager', '%fos_user.model.user.class%']

    marlinc.user.form_authenticator:
        class: Marlinc\UserBundle\Security\LoginFormAuthenticator
        arguments: ["@doctrine.orm.entity_manager", "@router", "@security.password_encoder", "@security.csrf.token_manager"]

    cas.authenticator:
        class:  Marlinc\UserBundle\Security\CasAuthenticator
        public: false

    cas.user.provider:
        class: Marlinc\UserBundle\Security\CasUserProvider
        arguments: ["@doctrine.orm.entity_manager"]

    marlinc1.authenticator:
        class: Marlinc\UserBundle\Security\Marlinc1Authenticator
        arguments: ["@security.http_utils"]

    marlinc1.user.provider:
        class: Marlinc\UserBundle\Security\Marlinc1UserProvider
        arguments: ["@doctrine.orm.entity_manager", "@doctrine.dbal.marlinc_connection"]

    user.export.user:
        class: Marlinc\UserBundle\Export\UserExport
        tags:
            - {name: marlinc.exporter.format, alias: user, class: Marlinc\UserBundle\Entity\User}

#    marlinccore.user.example:
#        class:     Marlinc\UserBundle\Example
#        arguments: ["@service_id", "plain_value", "%parameter%"]
#        calls:
#            - [setService, ["@service_id"]]
#        tags:
#            - { name: twig.extension }
#            - { name: kernel.event_listener, event: kernel.exception, method: onKernelException }
